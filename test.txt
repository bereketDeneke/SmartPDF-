

There are a few reasons why the code always starts the zoom level at 1 instead of the current zoom level. 

Firstly, the variable `rs` is initially set to 1, which means that the initial zoom level will always be 1. This variable is also used later in the code to determine whether to keep the previous ratio or use the new one. 

Secondly, the code does not retrieve the current zoom level of the diagram, but instead sets the zoom level to the value of `map`. This variable is calculated based on the new ratio `rf`, which is determined by the distance between two touch points. This means that every time the user performs a pinch-to-zoom gesture, the zoom level will be set to a new value based on the current distance between the touch points, regardless of the current zoom level of the diagram. 

Lastly, the code does not store or update the current zoom level of the diagram. If the user performs multiple pinch-to-zoom gestures, the zoom level will keep changing based on the distance between the touch points, but the code does not keep track of this. Therefore, every new pinch-to-zoom gesture will start from the initial zoom level of 1 instead of the current zoom level. 

To fix this issue, the code could retrieve the current zoom level of the diagram and use that as the starting point instead of always setting it to 1. Additionally, the code could update the current zoom level whenever the user performs a pinch-to-zoom gesture, so that subsequent gestures start from the current zoom level instead of the initial value. Finally, the code could also take into account any existing transformations or translations applied to the diagram when calculating the new zoom level.

There are a few reasons why the code always starts the zoom level at 1 instead of the current zoom level. 

Firstly, the variable `rs` is initially set to 1, which means that the initial zoom level will always be 1. This variable is also used later in the code to determine whether to keep the previous ratio or use the new one. 

Secondly, the code does not retrieve the current zoom level of the diagram, but instead sets the zoom level to the value of `map`. This variable is calculated based on the new ratio `rf`, which is determined by the distance between two touch points. This means that every time the user performs a pinch-to-zoom gesture, the zoom level will be set to a new value based on the current distance between the touch points, regardless of the current zoom level of the diagram. 

Lastly, the code does not store or update the current zoom level of the diagram. If the user performs multiple pinch-to-zoom gestures, the zoom level will keep changing based on the distance between the touch points, but the code does not keep track of this. Therefore, every new pinch-to-zoom gesture will start from the initial zoom level of 1 instead of the current zoom level. 

To fix this issue, the code could retrieve the current zoom level of the diagram and use that as the starting point instead of always setting it to 1. Additionally, the code could update the current zoom level whenever the user performs a pinch-to-zoom gesture, so that subsequent gestures start from the current zoom level instead of the initial value. Finally, the code could also take into account any existing transformations or translations applied to the diagram when calculating the new zoom level.